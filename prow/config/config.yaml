prowjob_namespace: prow
pod_namespace: prow-test-pods
log_level: debug

branch-protection:
  enforce_admins: true # rules apply to admins too!
  orgs:
    tikv:
      repos:
        community:
          branches:
            master:
              protect: true
              required_status_checks:
                contexts:
                  - "DCO"
        pd:
          branches:
            master:
              protect: true
              required_pull_request_reviews:
                require_code_owner_reviews: true
                required_approving_review_count: 1
              required_status_checks:
                contexts:
                  - "DCO"
                  - "tide"
                  - "statics"
                  - "chunks (1)"
                  - "chunks (2)"
                  - "chunks (3)"
                  - "chunks (4)"
                  - "chunks (5)"
                  - "chunks (6)"
                  - "chunks (7)"
                  - "chunks (8)"
                  - "chunks (9)"
                  - "chunks (10)"
                  - "tso-function-test"
                  - "idc-jenkins-ci/build"
                strict: true
            release-2.1:
              protect: true
              required_status_checks:
                contexts:
                  - "DCO"
                  - "idc-jenkins-ci/test"
                  - "idc-jenkins-ci/build"
                strict: true
            release-3.0:
              protect: true
              required_status_checks:
                contexts:
                  - "DCO"
                  - "idc-jenkins-ci/test"
                  - "idc-jenkins-ci/build"
                strict: true
            release-4.0:
              protect: true
              required_status_checks:
                contexts:
                  - "DCO"
                  - "statics"
                  - "idc-jenkins-ci/test"
                  - "idc-jenkins-ci/build"
                strict: true
            release-5.0:
              protect: true
              required_status_checks:
                contexts:
                  - "DCO"
                  - "tide"
                  - "statics"
                  - "idc-jenkins-ci/test"
                  - "idc-jenkins-ci/build"
                strict: true
            release-5.1:
              protect: true
              required_status_checks:
                contexts:
                  - "DCO"
                  - "tide"
                  - "statics"
                  - "idc-jenkins-ci/test"
                  - "idc-jenkins-ci/build"
                strict: true
            release-5.2:
              protect: true
              required_status_checks:
                contexts:
                  - "DCO"
                  - "tide"
                  - "statics"
                  - "tso-function-test"
                  - "idc-jenkins-ci/test"
                  - "idc-jenkins-ci/build"
                strict: true
            release-5.3:
              protect: true
              required_status_checks:
                contexts:
                  - "DCO"
                  - "tide"
                  - "statics"
                  - "tso-function-test"
                  - "idc-jenkins-ci/test"
                  - "idc-jenkins-ci/build"
                strict: true
            release-5.4:
              protect: true
              required_status_checks:
                contexts:
                  - "DCO"
                  - "tide"
                  - "statics"
                  - "tso-function-test"
                  - "idc-jenkins-ci/test"
                  - "idc-jenkins-ci/build"
                strict: true
            release-6.0:
              protect: true
              required_status_checks:
                contexts:
                  - "DCO"
                  - "tide"
                  - "statics"
                  - "chunks (1)"
                  - "chunks (2)"
                  - "chunks (3)"
                  - "chunks (4)"
                  - "chunks (5)"
                  - "chunks (6)"
                  - "chunks (7)"
                  - "chunks (8)"
                  - "chunks (9)"
                  - "chunks (10)"
                  - "tso-function-test"
                  - "idc-jenkins-ci/build"
                strict: true
            release-6.1:
              protect: true
              required_status_checks:
                contexts:
                  - "DCO"
                  - "tide"
                  - "statics"
                  - "chunks (1)"
                  - "chunks (2)"
                  - "chunks (3)"
                  - "chunks (4)"
                  - "chunks (5)"
                  - "chunks (6)"
                  - "chunks (7)"
                  - "chunks (8)"
                  - "chunks (9)"
                  - "chunks (10)"
                  - "tso-function-test"
                  - "idc-jenkins-ci/build"
                strict: true
            release-6.2:
              protect: true
              required_status_checks:
                contexts:
                  - "DCO"
                  - "tide"
                  - "statics"
                  - "chunks (1)"
                  - "chunks (2)"
                  - "chunks (3)"
                  - "chunks (4)"
                  - "chunks (5)"
                  - "chunks (6)"
                  - "chunks (7)"
                  - "chunks (8)"
                  - "chunks (9)"
                  - "chunks (10)"
                  - "tso-function-test"
                  - "idc-jenkins-ci/build"
                strict: true
        tikv:
          branches:
            master:
              protect: true
              required_pull_request_reviews:
                require_code_owner_reviews: true
                required_approving_review_count: 1
              required_status_checks:
                contexts:
                  - "DCO"
                  - "tide"
                  - "idc-jenkins-ci/test"
                strict: true
            release-2.1:
              protect: true
              required_status_checks:
                contexts:
                  - "DCO"
                  - "idc-jenkins-ci/test"
                  - "tide"
                strict: true
              restrictions:
                users:
                  - ti-chi-bot
            release-3.0:
              protect: true
              required_status_checks:
                contexts:
                  - "DCO"
                  - "idc-jenkins-ci/test"
                  - "tide"
                strict: true
              restrictions:
                users:
                  - ti-chi-bot
            release-4.0:
              protect: true
              required_status_checks:
                contexts:
                  - "DCO"
                  - "idc-jenkins-ci/test"
                  - "tide"
                strict: true
              restrictions:
                users:
                  - ti-chi-bot
            release-5.0:
              protect: true
              required_status_checks:
                contexts:
                  - "DCO"
                  - "idc-jenkins-ci/test"
                  - "tide"
                strict: true
              restrictions:
                users:
                  - ti-chi-bot
            release-5.1:
              protect: true
              required_status_checks:
                contexts:
                  - "DCO"
                  - "idc-jenkins-ci/test"
                  - "tide"
                strict: true
              restrictions:
                users:
                  - ti-chi-bot
            release-5.2:
              protect: true
              required_status_checks:
                contexts:
                  - "DCO"
                  - "idc-jenkins-ci/test"
                  - "tide"
                strict: true
              restrictions:
                users:
                  - ti-chi-bot
            release-5.3:
              protect: true
              required_status_checks:
                contexts:
                  - "DCO"
                  - "idc-jenkins-ci/test"
                  - "tide"
                strict: true
              restrictions:
                users:
                  - ti-chi-bot
            release-5.4:
              protect: true
              required_status_checks:
                contexts:
                  - "DCO"
                  - "idc-jenkins-ci/test"
                  - "tide"
                strict: true
              restrictions:
                users:
                  - ti-chi-bot
            release-6.0:
              protect: true
              required_status_checks:
                contexts:
                  - "DCO"
                  - "idc-jenkins-ci/test"
                  - "tide"
                strict: true
              restrictions:
                users:
                  - ti-chi-bot
            release-6.1:
              protect: true
              required_status_checks:
                contexts:
                  - "DCO"
                  - "idc-jenkins-ci/test"
                  - "tide"
                strict: true
              restrictions:
                users:
                  - ti-chi-bot
            release-6.2:
              protect: true
              required_status_checks:
                contexts:
                  - "DCO"
                  - "idc-jenkins-ci/test"
                  - "tide"
                strict: true
              restrictions:
                users:
                  - ti-chi-bot
    pingcap:
      repos:
        community:
          branches:
            master:
              protect: true
              required_status_checks:
                contexts:
                  - "license/cla"
        tidb-dashboard:
          branches:
            master:
              enforce_admins: false
              protect: true
              required_status_checks:
                contexts:
                  - "Backend"
                  - "Frontend"
                  - "Backend - Unit"
                  - "license/cla"
                strict: true
            release:
              enforce_admins: false
              protect: true
              required_status_checks:
                contexts:
                  - "Backend"
                  - "Frontend"
                  - "Backend - Unit"
                  - "check_release_version"
                  - "license/cla"
                strict: true
        tidb-operator:
          branches:
            master:
              protect: true
              required_status_checks:
                contexts:
                  - "pull (verify)"
                  - "pull (build)"
                  - "pull (test)"
                  - "pull (e2e-examples)"
                  - "jenkins-ci / pull-e2e-kind"
                  - "jenkins-ci / pull-e2e-kind-serial"
                  - "jenkins-ci / pull-e2e-kind-basic"
                  - "jenkins-ci / pull-e2e-kind-br"
                  - "jenkins-ci / pull-e2e-kind-across-kubernetes"
                  - "license/cla"
                strict: true
            release-1.3:
              protect: true
              required_status_checks:
                contexts:
                  - "pull (verify)"
                  - "pull (build)"
                  - "pull (test)"
                  - "pull (e2e-examples)"
                  - "jenkins-ci / pull-e2e-kind"
                  - "jenkins-ci / pull-e2e-kind-serial"
                  - "jenkins-ci / pull-e2e-kind-basic"
                  - "jenkins-ci / pull-e2e-kind-br"
                  - "jenkins-ci / pull-e2e-kind-across-kubernetes"
                  - "license/cla"
                strict: true
            release-1.2:
              protect: true
              required_status_checks:
                contexts:
                  - "pull (verify)"
                  - "pull (build)"
                  - "pull (test)"
                  - "pull (e2e-examples)"
                  - "jenkins-ci / pull-e2e-kind"
                  - "jenkins-ci / pull-e2e-kind-serial"
                  - "jenkins-ci / pull-e2e-kind-basic"
                  - "jenkins-ci / pull-e2e-kind-br"
                  - "license/cla"
                strict: true
            release-1.1:
              protect: true
              required_status_checks:
                contexts:
                  - "pull (verify)"
                  - "pull (build)"
                  - "pull (test)"
                  - "pull (e2e-examples)"
                  - "jenkins-ci / pull-e2e-kind"
                  - "jenkins-ci / pull-e2e-kind-serial"
                  - "license/cla"
                strict: true
        tiup:
          branches:
            master:
              protect: true
              required_status_checks:
                contexts:
                  - "license/cla"
                strict: true
        tidb:
          branches:
            master:
              protect: true
              required_pull_request_reviews:
                require_code_owner_reviews: true
                required_approving_review_count: 1
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-tidb/build"
                  - "idc-jenkins-ci-tidb/check_dev"
                  - "idc-jenkins-ci-tidb/check_dev_2"
                  - "idc-jenkins-ci-tidb/unit-test"
                  - "idc-jenkins-ci-tidb/mysql-test"
                  - "license/cla"
                  - "check-issue-triage-complete"
                  - "check-license"
                  - "tide"
                strict: true
            release-2.1:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-tidb/build"
                  - "idc-jenkins-ci-tidb/check_dev"
                  - "idc-jenkins-ci-tidb/check_dev_2"
                  - "idc-jenkins-ci-tidb/unit-test"
                  - "idc-jenkins-ci-tidb/mysql-test"
                  - "license/cla"
                  - "tide"
                strict: true
              restrictions:
                users:
                  - ti-chi-bot
            release-3.0:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-tidb/build"
                  - "idc-jenkins-ci-tidb/check_dev"
                  - "idc-jenkins-ci-tidb/check_dev_2"
                  - "idc-jenkins-ci-tidb/unit-test"
                  - "idc-jenkins-ci-tidb/mysql-test"
                  - "license/cla"
                  - "tide"
                strict: true
              restrictions:
                users:
                  - ti-chi-bot
            release-4.0:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-tidb/build"
                  - "idc-jenkins-ci-tidb/check_dev"
                  - "idc-jenkins-ci-tidb/check_dev_2"
                  - "idc-jenkins-ci-tidb/unit-test"
                  - "idc-jenkins-ci-tidb/mysql-test"
                  - "license/cla"
                  - "tide"
                strict: true
              restrictions:
                users:
                  - ti-chi-bot
            release-5.0:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-tidb/build"
                  - "idc-jenkins-ci-tidb/check_dev"
                  - "idc-jenkins-ci-tidb/check_dev_2"
                  - "idc-jenkins-ci-tidb/unit-test"
                  - "idc-jenkins-ci-tidb/mysql-test"
                  - "license/cla"
                  - "tide"
                strict: true
              restrictions:
                users:
                  - ti-chi-bot
            release-5.1:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-tidb/build"
                  - "idc-jenkins-ci-tidb/check_dev"
                  - "idc-jenkins-ci-tidb/check_dev_2"
                  - "idc-jenkins-ci-tidb/unit-test"
                  - "idc-jenkins-ci-tidb/mysql-test"
                  - "license/cla"
                  - "tide"
                strict: true
              restrictions:
                users:
                  - ti-chi-bot
            release-5.2:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-tidb/build"
                  - "idc-jenkins-ci-tidb/check_dev"
                  - "idc-jenkins-ci-tidb/check_dev_2"
                  - "idc-jenkins-ci-tidb/unit-test"
                  - "idc-jenkins-ci-tidb/mysql-test"
                  - "license/cla"
                  - "tide"
                strict: true
              restrictions:
                users:
                  - ti-chi-bot
            release-5.3:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-tidb/build"
                  - "idc-jenkins-ci-tidb/check_dev"
                  - "idc-jenkins-ci-tidb/check_dev_2"
                  - "idc-jenkins-ci-tidb/unit-test"
                  - "idc-jenkins-ci-tidb/mysql-test"
                  - "license/cla"
                  - "tide"
                strict: true
              restrictions:
                users:
                  - ti-chi-bot
            release-5.4:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-tidb/build"
                  - "idc-jenkins-ci-tidb/check_dev"
                  - "idc-jenkins-ci-tidb/check_dev_2"
                  - "idc-jenkins-ci-tidb/unit-test"
                  - "idc-jenkins-ci-tidb/mysql-test"
                  - "license/cla"
                  - "tide"
                strict: true
              restrictions:
                users:
                  - ti-chi-bot
            release-6.0:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-tidb/build"
                  - "idc-jenkins-ci-tidb/check_dev"
                  - "idc-jenkins-ci-tidb/check_dev_2"
                  - "idc-jenkins-ci-tidb/unit-test"
                  - "idc-jenkins-ci-tidb/mysql-test"
                  - "license/cla"
                  - "tide"
                strict: true
              restrictions:
                users:
                  - ti-chi-bot
            release-6.1:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-tidb/build"
                  - "idc-jenkins-ci-tidb/check_dev"
                  - "idc-jenkins-ci-tidb/check_dev_2"
                  - "idc-jenkins-ci-tidb/unit-test"
                  - "idc-jenkins-ci-tidb/mysql-test"
                  - "license/cla"
                  - "tide"
                strict: true
              restrictions:
                users:
                  - ti-chi-bot
            release-6.2:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-tidb/build"
                  - "idc-jenkins-ci-tidb/check_dev"
                  - "idc-jenkins-ci-tidb/check_dev_2"
                  - "idc-jenkins-ci-tidb/unit-test"
                  - "idc-jenkins-ci-tidb/mysql-test"
                  - "license/cla"
                  - "tide"
                strict: true
              restrictions:
                users:
                  - ti-chi-bot
            feature/distribute-reorg:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-tidb/build"
                  - "idc-jenkins-ci-tidb/check_dev"
                  - "idc-jenkins-ci-tidb/check_dev_2"
                  - "idc-jenkins-ci-tidb/unit-test"
                  - "idc-jenkins-ci-tidb/mysql-test"
                  - "license/cla"
                  - "tide"
                strict: true
              restrictions:
                users:
                  - ti-chi-bot
            feature/flashback-cluster:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-tidb/build"
                  - "idc-jenkins-ci-tidb/check_dev"
                  - "idc-jenkins-ci-tidb/check_dev_2"
                  - "idc-jenkins-ci-tidb/unit-test"
                  - "idc-jenkins-ci-tidb/mysql-test"
                  - "license/cla"
                  - "tide"
                strict: true
              restrictions:
                users:
                  - ti-chi-bot
        docs:
          branches:
            master:
              protect: true
              required_status_checks:
                contexts:
                  - "jenkins-docs/verify"
                  - "tidb-check"
                  - "tidb-cloud-check"
                  - "license/cla"
                  - "tide"
                strict: false
            release-2.1:
              protect: true
              required_status_checks:
                contexts:
                  - "jenkins-docs/verify"
                  - "pull"
                  - "license/cla"
                  - "tide"
                strict: false
            release-3.0:
              protect: true
              required_status_checks:
                contexts:
                  - "jenkins-docs/verify"
                  - "pull"
                  - "license/cla"
                  - "tide"
                strict: false
            release-3.1:
              protect: true
              required_status_checks:
                contexts:
                  - "jenkins-docs/verify"
                  - "pull"
                  - "license/cla"
                  - "tide"
                strict: false
            release-4.0:
              protect: true
              required_status_checks:
                contexts:
                  - "jenkins-docs/verify"
                  - "pull"
                  - "license/cla"
                  - "tide"
                strict: false
            release-5.0:
              protect: true
              required_status_checks:
                contexts:
                  - "jenkins-docs/verify"
                  - "pull"
                  - "license/cla"
                  - "tide"
                strict: false
            release-5.1:
              protect: true
              required_status_checks:
                contexts:
                  - "jenkins-docs/verify"
                  - "pull"
                  - "license/cla"
                  - "tide"
                strict: false
            release-5.2:
              protect: true
              required_status_checks:
                contexts:
                  - "jenkins-docs/verify"
                  - "pull"
                  - "license/cla"
                  - "tide"
                strict: false
            release-5.3:
              protect: true
              required_status_checks:
                contexts:
                  - "jenkins-docs/verify"
                  - "pull"
                  - "license/cla"
                  - "tide"
                strict: false
            release-5.4:
              protect: true
              required_status_checks:
                contexts:
                  - "jenkins-docs/verify"
                  - "tidb-check"
                  - "tidb-cloud-check"
                  - "license/cla"
                  - "tide"
                strict: false
            release-6.0:
              protect: true
              required_status_checks:
                contexts:
                  - "jenkins-docs/verify"
                  - "pull"
                  - "license/cla"
                  - "tide"
                strict: false
            release-6.1:
              protect: true
              required_status_checks:
                contexts:
                  - "jenkins-docs/verify"
                  - "tidb-check"
                  - "tidb-cloud-check"
                  - "license/cla"
                  - "tide"
                strict: false
            release-6.2:
              protect: true
              required_status_checks:
                contexts:
                  - "jenkins-docs/verify"
                  - "tidb-check"
                  - "tidb-cloud-check"
                  - "license/cla"
                  - "tide"
                strict: false
        docs-cn:
          branches:
            master:
              protect: true
              required_status_checks:
                contexts:
                  - "jenkins-docs-cn/verify"
                  - "pull"
                  - "license/cla"
                  - "tide"
                strict: false
            release-2.1:
              protect: true
              required_status_checks:
                contexts:
                  - "jenkins-docs-cn/verify"
                  - "pull"
                  - "license/cla"
                  - "tide"
                strict: false
            release-3.0:
              protect: true
              required_status_checks:
                contexts:
                  - "jenkins-docs-cn/verify"
                  - "pull"
                  - "license/cla"
                  - "tide"
                strict: false
            release-3.1:
              protect: true
              required_status_checks:
                contexts:
                  - "jenkins-docs-cn/verify"
                  - "pull"
                  - "license/cla"
                  - "tide"
                strict: false
            release-4.0:
              protect: true
              required_status_checks:
                contexts:
                  - "jenkins-docs-cn/verify"
                  - "pull"
                  - "license/cla"
                  - "tide"
                strict: false
            release-5.0:
              protect: true
              required_status_checks:
                contexts:
                  - "jenkins-docs-cn/verify"
                  - "pull"
                  - "license/cla"
                  - "tide"
                strict: false
            release-5.1:
              protect: true
              required_status_checks:
                contexts:
                  - "jenkins-docs-cn/verify"
                  - "pull"
                  - "license/cla"
                  - "tide"
                strict: false
            release-5.2:
              protect: true
              required_status_checks:
                contexts:
                  - "jenkins-docs-cn/verify"
                  - "pull"
                  - "license/cla"
                  - "tide"
                strict: false
            release-5.3:
              protect: true
              required_status_checks:
                contexts:
                  - "jenkins-docs-cn/verify"
                  - "pull"
                  - "license/cla"
                  - "tide"
                strict: false
            release-5.4:
              protect: true
              required_status_checks:
                contexts:
                  - "jenkins-docs-cn/verify"
                  - "pull"
                  - "license/cla"
                  - "tide"
                strict: false
            release-6.0:
              protect: true
              required_status_checks:
                contexts:
                  - "jenkins-docs-cn/verify"
                  - "pull"
                  - "license/cla"
                  - "tide"
                strict: false
            release-6.1:
              protect: true
              required_status_checks:
                contexts:
                  - "jenkins-docs-cn/verify"
                  - "pull"
                  - "license/cla"
                  - "tide"
                strict: false
            release-6.2:
              protect: true
              required_status_checks:
                contexts:
                  - "jenkins-docs-cn/verify"
                  - "pull"
                  - "license/cla"
                  - "tide"
                strict: false
        docs-dm:
          branches:
            master:
              protect: true
              required_status_checks:
                contexts:
                  - "pull"
                  - "license/cla"
                  - "tide"
                strict: false
            release-1.0:
              protect: true
              required_status_checks:
                contexts:
                  - "pull"
                  - "license/cla"
                  - "tide"
                strict: false
            release-2.0:
              protect: true
              required_status_checks:
                contexts:
                  - "pull"
                  - "license/cla"
                  - "tide"
                strict: false
            release-5.3:
              protect: true
              required_status_checks:
                contexts:
                  - "pull"
                  - "license/cla"
                  - "tide"
                strict: false
        docs-tidb-operator:
          branches:
            master:
              protect: true
              required_status_checks:
                contexts:
                  - "check-file-encoding"
                  - "check-git-conflicts"
                  - "markdownlint"
                  - "verify-internal-links"
                  - "verify-internal-link-anchors"
                  - "check-control-characters"
                  - "check-unclosed-tags"
                  - "check-manual-line-breaks"
                  - "license/cla"
                  - "tide"
                strict: false
            release-1.0:
              protect: true
              required_status_checks:
                contexts:
                  - "check-file-encoding"
                  - "check-git-conflicts"
                  - "markdownlint"
                  - "verify-internal-links"
                  - "verify-internal-link-anchors"
                  - "check-control-characters"
                  - "check-unclosed-tags"
                  - "check-manual-line-breaks"
                  - "license/cla"
                  - "tide"
                strict: false
            release-1.1:
              protect: true
              required_status_checks:
                contexts:
                  - "check-file-encoding"
                  - "check-git-conflicts"
                  - "markdownlint"
                  - "verify-internal-links"
                  - "verify-internal-link-anchors"
                  - "check-control-characters"
                  - "check-unclosed-tags"
                  - "check-manual-line-breaks"
                  - "license/cla"
                  - "tide"
                strict: false
            release-1.2:
              protect: true
              required_status_checks:
                contexts:
                  - "check-file-encoding"
                  - "check-git-conflicts"
                  - "markdownlint"
                  - "verify-internal-links"
                  - "verify-internal-link-anchors"
                  - "check-control-characters"
                  - "check-unclosed-tags"
                  - "check-manual-line-breaks"
                  - "license/cla"
                  - "tide"
                strict: false
            release-1.3:
              protect: true
              required_status_checks:
                contexts:
                  - "check-file-encoding"
                  - "check-git-conflicts"
                  - "markdownlint"
                  - "verify-internal-links"
                  - "verify-internal-link-anchors"
                  - "check-control-characters"
                  - "check-unclosed-tags"
                  - "check-manual-line-breaks"
                  - "license/cla"
                  - "tide"
                strict: false
        docs-appdev:
          branches:
            master:
              protect: true
              required_status_checks:
                contexts:
                  - "pull"
                  - "base"
                  - "tide"
                strict: false
            add-tdds-documents:
              protect: true
              required_status_checks:
                contexts:
                  - "pull"
                  - "base"
                  - "tide"
                strict: false
        dumpling:
          branches:
            master:
              protect: true
              required_status_checks:
                contexts:
                  - "unit-test"
                  - "integration-test-mysql-5735"
                  - "integration-test-mysql-8022"
                  - "integration-test-mysql-8026"
                  - "license/cla"
                strict: false
            release-4.0:
              protect: true
              required_status_checks:
                contexts:
                  - "unit-test"
                  - "integration-test-mysql-5735"
                  - "integration-test-mysql-8022"
                  - "integration-test-mysql-8026"
                  - "license/cla"
                strict: false
            release-5.0:
              protect: true
              required_status_checks:
                contexts:
                  - "unit-test"
                  - "integration-test-mysql-5735"
                  - "integration-test-mysql-8022"
                  - "integration-test-mysql-8026"
                  - "license/cla"
                strict: false
            release-5.1:
              protect: true
              required_status_checks:
                contexts:
                  - "unit-test"
                  - "integration-test-mysql-5735"
                  - "integration-test-mysql-8022"
                  - "integration-test-mysql-8026"
                  - "license/cla"
                strict: false
            release-5.2:
              protect: true
              required_status_checks:
                contexts:
                  - "unit-test"
                  - "integration-test-mysql-5735"
                  - "integration-test-mysql-8022"
                  - "integration-test-mysql-8026"
                  - "license/cla"
                strict: false
        dm:
          branches:
            master:
              protect: true
              required_status_checks:
                contexts:
                  - "Make Build (ubuntu-latest)"
                  - "Lint"
                  - "idc-jenkins-ci-dm/compatibility_test"
                  - "idc-jenkins-ci-dm/integration-test"
                  - "license/cla"
                  - "idc-jenkins-ci-dm/unit-test"
                strict: true
            release-2.0:
              protect: true
              required_status_checks:
                contexts:
                  - "Make Build (ubuntu-latest)"
                  - "Lint"
                  - "idc-jenkins-ci-dm/compatibility_test"
                  - "idc-jenkins-ci-dm/integration-test"
                  - "license/cla"
                  - "idc-jenkins-ci-dm/unit-test"
                strict: true
        tidb-tools:
          branches:
            master:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-tidb-tools/unit-test"
                  - "license/cla"
                strict: true
            release-5.0:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-tidb-tools/unit-test"
                  - "license/cla"
                strict: true
            release-5.1:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-tidb-tools/unit-test"
                  - "license/cla"
                strict: true
            release-5.2:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-tidb-tools/unit-test"
                  - "license/cla"
                strict: true
        tiflow:
          branches:
            master:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-ticdc/integration-test"
                  - "idc-jenkins-ci-ticdc/kafka-integration-test"
                  - "idc-jenkins-ci-ticdc/dm-integration-test"
                  - "idc-jenkins-ci-ticdc/dm-compatibility-test"
                  - "jenkins-ticdc/verify"
                  - "idc-jenkins-ci/leak-test"
                  - "license/cla"
                  - "check-issue-triage-complete"
                  - "tide"
                strict: true
            release-4.0:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-ticdc/integration-test"
                  - "idc-jenkins-ci-ticdc/kafka-integration-test"
                  - "idc-jenkins-ci-ticdc/unit-test"
                  - "idc-jenkins-ci/leak-test"
                  - "license/cla"
                  - "tide"
                strict: true
            release-5.0:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-ticdc/integration-test"
                  - "idc-jenkins-ci-ticdc/kafka-integration-test"
                  - "idc-jenkins-ci-ticdc/unit-test"
                  - "idc-jenkins-ci/leak-test"
                  - "license/cla"
                  - "tide"
                strict: true
            release-5.1:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-ticdc/integration-test"
                  - "idc-jenkins-ci-ticdc/kafka-integration-test"
                  - "idc-jenkins-ci-ticdc/unit-test"
                  - "idc-jenkins-ci/leak-test"
                  - "license/cla"
                  - "tide"
                strict: true
            release-5.2:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-ticdc/integration-test"
                  - "idc-jenkins-ci-ticdc/kafka-integration-test"
                  - "idc-jenkins-ci-ticdc/unit-test"
                  - "idc-jenkins-ci/leak-test"
                  - "license/cla"
                  - "tide"
                strict: true
            release-5.3:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-ticdc/integration-test"
                  - "idc-jenkins-ci-ticdc/kafka-integration-test"
                  - "idc-jenkins-ci-ticdc/dm-integration-test"
                  - "idc-jenkins-ci-ticdc/dm-compatibility-test"
                  - "idc-jenkins-ci-ticdc/unit-test"
                  - "idc-jenkins-ci/leak-test"
                  - "license/cla"
                  - "tide"
                strict: true
            release-5.4:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-ticdc/integration-test"
                  - "idc-jenkins-ci-ticdc/kafka-integration-test"
                  - "idc-jenkins-ci-ticdc/dm-integration-test"
                  - "idc-jenkins-ci-ticdc/dm-compatibility-test"
                  - "idc-jenkins-ci-ticdc/unit-test"
                  - "idc-jenkins-ci/leak-test"
                  - "license/cla"
                  - "tide"
                strict: true
            release-6.0:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-ticdc/integration-test"
                  - "idc-jenkins-ci-ticdc/kafka-integration-test"
                  - "idc-jenkins-ci-ticdc/dm-integration-test"
                  - "idc-jenkins-ci-ticdc/dm-compatibility-test"
                  - "idc-jenkins-ci-ticdc/unit-test"
                  - "idc-jenkins-ci/leak-test"
                  - "license/cla"
                  - "tide"
                strict: true
            release-6.1:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-ticdc/integration-test"
                  - "idc-jenkins-ci-ticdc/kafka-integration-test"
                  - "idc-jenkins-ci-ticdc/dm-integration-test"
                  - "idc-jenkins-ci-ticdc/dm-compatibility-test"
                  - "idc-jenkins-ci-ticdc/unit-test"
                  - "idc-jenkins-ci/leak-test"
                  - "license/cla"
                  - "tide"
                strict: true
            release-6.2:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-ticdc/integration-test"
                  - "idc-jenkins-ci-ticdc/kafka-integration-test"
                  - "idc-jenkins-ci-ticdc/dm-integration-test"
                  - "idc-jenkins-ci-ticdc/dm-compatibility-test"
                  - "idc-jenkins-ci-ticdc/unit-test"
                  - "idc-jenkins-ci/leak-test"
                  - "license/cla"
                  - "tide"
                strict: true
            cli-use-open-api:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-ticdc/integration-test"
                  - "idc-jenkins-ci-ticdc/kafka-integration-test"
                  - "idc-jenkins-ci-ticdc/unit-test"
                  - "idc-jenkins-ci/leak-test"
                  - "jenkins-ticdc/verify"
                  - "license/cla"
                  - "tide"
                strict: true
        tidb-binlog:
          branches:
            master:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-binlog/build"
                  - "idc-jenkins-ci-binlog/check"
                  - "idc-jenkins-ci-tidb-binlog/integration-test"
                  - "idc-jenkins-ci-tidb-binlog/unit-test"
                strict: true
            release-4.0:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-binlog/build"
                  - "idc-jenkins-ci-binlog/check"
                  - "idc-jenkins-ci-tidb-binlog/integration-test"
                  - "idc-jenkins-ci-tidb-binlog/unit-test"
                strict: true
            release-5.0:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-binlog/build"
                  - "idc-jenkins-ci-binlog/check"
                  - "idc-jenkins-ci-tidb-binlog/integration-test"
                  - "idc-jenkins-ci-tidb-binlog/unit-test"
                strict: true
            release-5.1:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-binlog/build"
                  - "idc-jenkins-ci-binlog/check"
                  - "idc-jenkins-ci-tidb-binlog/integration-test"
                  - "idc-jenkins-ci-tidb-binlog/unit-test"
                strict: true
            release-5.2:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-binlog/build"
                  - "idc-jenkins-ci-binlog/check"
                  - "idc-jenkins-ci-tidb-binlog/integration-test"
                  - "idc-jenkins-ci-tidb-binlog/unit-test"
                strict: true
            release-5.3:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-binlog/build"
                  - "idc-jenkins-ci-binlog/check"
                  - "idc-jenkins-ci-tidb-binlog/integration-test"
                  - "idc-jenkins-ci-tidb-binlog/unit-test"
                strict: true
            release-5.4:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-binlog/build"
                  - "idc-jenkins-ci-binlog/check"
                  - "idc-jenkins-ci-tidb-binlog/integration-test"
                  - "idc-jenkins-ci-tidb-binlog/unit-test"
                strict: true
            release-6.0:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-binlog/build"
                  - "idc-jenkins-ci-binlog/check"
                  - "idc-jenkins-ci-tidb-binlog/integration-test"
                  - "idc-jenkins-ci-tidb-binlog/unit-test"
                strict: true
            release-6.1:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-binlog/build"
                  - "idc-jenkins-ci-binlog/check"
                  - "idc-jenkins-ci-tidb-binlog/integration-test"
                  - "idc-jenkins-ci-tidb-binlog/unit-test"
                strict: true
            release-6.2:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-binlog/build"
                  - "idc-jenkins-ci-binlog/check"
                  - "idc-jenkins-ci-tidb-binlog/integration-test"
                  - "idc-jenkins-ci-tidb-binlog/unit-test"
                strict: true
        br:
          branches:
            master:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-br/build"
                  - "idc-jenkins-ci-br/integration_test"
                  - "license/cla"
                strict: true
            release-4.0:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-br/build"
                  - "idc-jenkins-ci-br/integration_test"
                  - "license/cla"
                strict: true
            release-5.0:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-br/build"
                  - "idc-jenkins-ci-br/integration_test"
                  - "license/cla"
                strict: true
            release-5.1:
              protect: true
              required_status_checks:
                contexts:
                  - "idc-jenkins-ci-br/build"
                  - "idc-jenkins-ci-br/integration_test"
                  - "license/cla"
                strict: true
        parser:
          branches:
            master:
              protect: true
              required_status_checks:
                contexts:
                  - "license/cla"
                strict: true
            release-4.0:
              protect: true
              required_status_checks:
                contexts:
                  - "license/cla"
                strict: true
            release-5.0:
              protect: true
              required_status_checks:
                contexts:
                  - "license/cla"
                strict: true
            release-5.1:
              protect: true
              required_status_checks:
                contexts:
                  - "license/cla"
                strict: true
            release-5.2:
              protect: true
              required_status_checks:
                contexts:
                  - "license/cla"
                strict: true
        tiflash:
          branches:
            master:
              protect: true
              required_status_checks:
                contexts:
                  - "tide"
                  - "idc-jenkins-ci-tiflash/unit-test"
                  - "idc-jenkins-ci-tiflash/integration-test"
                  - "idc-jenkins-ci-tiflash/build"
                  - "check-issue-triage-complete"
                  - "license/cla"
                  - "check-license"
                strict: true
            release-4.0:
              protect: true
              required_status_checks:
                contexts:
                  - "tide"
                  - "idc-jenkins-ci-tiflash/unit-test"
                  - "idc-jenkins-ci-tiflash/integration-test"
                  - "idc-jenkins-ci-tiflash/build"
                  - "license/cla"
                strict: true
            release-5.0:
              protect: true
              required_status_checks:
                contexts:
                  - "tide"
                  - "idc-jenkins-ci-tiflash/unit-test"
                  - "idc-jenkins-ci-tiflash/integration-test"
                  - "idc-jenkins-ci-tiflash/build"
                  - "license/cla"
                strict: true
            release-5.1:
              protect: true
              required_status_checks:
                contexts:
                  - "tide"
                  - "idc-jenkins-ci-tiflash/unit-test"
                  - "idc-jenkins-ci-tiflash/integration-test"
                  - "idc-jenkins-ci-tiflash/build"
                  - "license/cla"
                strict: true
            release-5.2:
              protect: true
              required_status_checks:
                contexts:
                  - "tide"
                  - "idc-jenkins-ci-tiflash/unit-test"
                  - "idc-jenkins-ci-tiflash/integration-test"
                  - "idc-jenkins-ci-tiflash/build"
                  - "license/cla"
                strict: true
            release-5.3:
              protect: true
              required_status_checks:
                contexts:
                  - "tide"
                  - "idc-jenkins-ci-tiflash/unit-test"
                  - "idc-jenkins-ci-tiflash/integration-test"
                  - "idc-jenkins-ci-tiflash/build"
                  - "license/cla"
                strict: true
            release-5.4:
              protect: true
              required_status_checks:
                contexts:
                  - "tide"
                  - "idc-jenkins-ci-tiflash/unit-test"
                  - "idc-jenkins-ci-tiflash/integration-test"
                  - "idc-jenkins-ci-tiflash/build"
                  - "license/cla"
                strict: true
            release-6.0:
              protect: true
              required_status_checks:
                contexts:
                  - "tide"
                  - "idc-jenkins-ci-tiflash/unit-test"
                  - "idc-jenkins-ci-tiflash/integration-test"
                  - "idc-jenkins-ci-tiflash/build"
                  - "license/cla"
                strict: true
            release-6.1:
              protect: true
              required_status_checks:
                contexts:
                  - "tide"
                  - "idc-jenkins-ci-tiflash/unit-test"
                  - "idc-jenkins-ci-tiflash/integration-test"
                  - "idc-jenkins-ci-tiflash/build"
                  - "license/cla"
                strict: true
            release-6.2:
              protect: true
              required_status_checks:
                contexts:
                  - "tide"
                  - "idc-jenkins-ci-tiflash/unit-test"
                  - "idc-jenkins-ci-tiflash/integration-test"
                  - "idc-jenkins-ci-tiflash/build"
                  - "license/cla"
                strict: true
        tiflash-scripts:
          branches:
            master:
              protect: true
              required_status_checks:
                contexts:
                  - "tide"
                  - "idc-jenkins-ci-tiflash-scripts/test"
                  - "idc-jenkins-ci-tiflash-scripts/build"
                strict: true
            release-4.0:
              protect: true
              required_status_checks:
                contexts:
                  - "tide"
                  - "idc-jenkins-ci-tiflash-scripts/test"
                  - "idc-jenkins-ci-tiflash-scripts/build"
                strict: true
            release-5.0:
              protect: true
              required_status_checks:
                contexts:
                  - "tide"
                  - "idc-jenkins-ci-tiflash-scripts/test"
                  - "idc-jenkins-ci-tiflash-scripts/build"
                strict: true
            release-5.1:
              protect: true
              required_status_checks:
                contexts:
                  - "tide"
                  - "idc-jenkins-ci-tiflash-scripts/test"
                  - "idc-jenkins-ci-tiflash-scripts/build"
                strict: true
            release-5.2:
              protect: true
              required_status_checks:
                contexts:
                  - "tide"
                  - "idc-jenkins-ci-tiflash-scripts/test"
                  - "idc-jenkins-ci-tiflash-scripts/build"
                strict: true
            release-5.3:
              protect: true
              required_status_checks:
                contexts:
                  - "tide"
                  - "idc-jenkins-ci-tiflash-scripts/test"
                  - "idc-jenkins-ci-tiflash-scripts/build"
                strict: true
            release-5.4:
              protect: true
              required_status_checks:
                contexts:
                  - "tide"
                  - "idc-jenkins-ci-tiflash-scripts/test"
                  - "idc-jenkins-ci-tiflash-scripts/build"
                strict: true
            release-6.0:
              protect: true
              required_status_checks:
                contexts:
                  - "tide"
                  - "idc-jenkins-ci-tiflash-scripts/test"
                  - "idc-jenkins-ci-tiflash-scripts/build"
                strict: true
            release-6.1:
              protect: true
              required_status_checks:
                contexts:
                  - "tide"
                  - "idc-jenkins-ci-tiflash-scripts/test"
                  - "idc-jenkins-ci-tiflash-scripts/build"
                strict: true
            release-6.2:
              protect: true
              required_status_checks:
                contexts:
                  - "tide"
                  - "idc-jenkins-ci-tiflash-scripts/test"
                  - "idc-jenkins-ci-tiflash-scripts/build"
                strict: true
        tispark:
          branches:
            master:
              protect: true
              required_status_checks:
                contexts:
                  - "tide"
                  - "license/cla"
                  - "build"
                  - "idc-jenkins-ci-tispark/integration-test"
                strict: true
            release-2.3:
              protect: true
              required_status_checks:
                contexts:
                  - "tide"
                  - "license/cla"
                  - "idc-jenkins-ci-tispark/integration-test"
                strict: true
            release-2.4:
              protect: true
              required_status_checks:
                contexts:
                  - "tide"
                  - "license/cla"
                  - "idc-jenkins-ci-tispark/integration-test"
                strict: true
            release-2.5:
              protect: true
              required_status_checks:
                contexts:
                  - "tide"
                  - "license/cla"
                  - "idc-jenkins-ci-tispark/integration-test"
                strict: true
      tiunimanager:
        branches:
          main:
            protect: true
            required_status_checks:
              contexts:
                - "tide"
                - "license/cla"
                - "jenkins-tiem/verify"
      tiunimanager-ui:
        branches:
          main:
            protect: true
            required_status_checks:
              contexts:
                - "tide"
                - "license/cla"
                - "build"
                - "lint"
    chaos-mesh:
      repos:
        chaos-mesh:
          branches:
            master:
              protect: true
              required_status_checks:
                contexts:
                  - "DCO"
                  - "go (amd64, build)"
                  - "go (amd64, test)"
                  - "go (amd64, verify)"
                  - "go (arm64, build)"
                  - "go (arm64, test)"
                  - "go (arm64, verify)"
                  - "ui (build)"
                  - "ui (test)"
                  - "E2E Test Passed"
                strict: true
            release-1.0:
              protect: true
              required_status_checks:
                contexts:
                  - "pull (verify)"
                  - "pull (build)"
                  - "pull (test)"
                  - "DCO"
                  - "chaos-mesh/e2e-test"
                strict: true
            release-1.1:
              protect: true
              required_status_checks:
                contexts:
                  - "pull (verify)"
                  - "pull (build)"
                  - "pull (test)"
                  - "DCO"
                  - "chaos-mesh/e2e-test"
                strict: true
            release-1.2:
              protect: true
              required_status_checks:
                contexts:
                  - "pull (verify)"
                  - "pull (build)"
                  - "pull (test)"
                  - "DCO"
                  - "chaos-mesh/e2e-test"
                strict: true
            release-2.0:
              protect: true
              required_status_checks:
                contexts:
                  - "pull (verify)"
                  - "pull (build)"
                  - "pull (test)"
                  - "DCO"
                  - "chaos-mesh/e2e-test"
                strict: true
            release-2.1:
              protect: true
              required_status_checks:
                contexts:
                  - "DCO"
                  - "go (build)"
                  - "go (test)"
                  - "go (verify)"
                  - "ui (build)"
                  - "ui (test)"
                  - "E2E Test Passed"
                strict: true
            release-2.2:
              protect: true
              required_status_checks:
                contexts:
                  - "DCO"
                  - "go (build)"
                  - "go (test)"
                  - "go (verify)"
                  - "ui (build)"
                  - "ui (test)"
                  - "E2E Test Passed"
                strict: true 
            release-2.3:
              protect: true
              required_status_checks:
                contexts:
                  - "DCO"
                  - "go (amd64, build)"
                  - "go (amd64, test)"
                  - "go (amd64, verify)"
                  - "go (arm64, build)"
                  - "go (arm64, test)"
                  - "go (arm64, verify)"
                  - "ui (build)"
                  - "ui (test)"
                  - "E2E Test Passed"
                strict: true
        website:
          enforce_admins: false
          branches:
            master:
              protect: true
              required_status_checks:
                contexts:
                  - "DCO"
                  - "test"
                strict: false
        chaosd:
          branches:
            main:
              protect: true
              required_status_checks:
                contexts:
                  - "pull (amd64, verify)"
                  - "pull (amd64, build)"
                  - "pull (amd64, unit-test)"
                  - "pull (amd64, integration-test)"
                  - "pull (arm64, verify)"
                  - "pull (arm64, build)"
                  - "pull (arm64, unit-test)"
                  - "pull (arm64, integration-test)"
                  - "DCO"
                strict: true
    ti-community-infra:
      repos:
        tichi:
          branches:
            master:
              protect: true
              required_status_checks:
                contexts:
                  - "tide"
                  - "lint"
                  - "codecov/project"
                  - "pull-tichi-rerere"
                  - "pull-tichi-unit-test"
                  - "pull-tichi-web-node10-lint"
                  - "pull-tichi-web-node12-lint"
                  - "pull-tichi-web-node14-lint"
                strict: false
        configs:
          branches:
            main:
              protect: true
              required_status_checks:
                contexts: []
                strict: false
        rfcs:
          branches:
            main:
              protect: true
              required_status_checks:
                contexts: []
                strict: false
        devstats-dev-guide:
          branches:
            main:
              protect: true
              required_status_checks:
                contexts: []
                strict: false
        devstats:
          branches:
            main:
              protect: true
              required_status_checks:
                contexts: []
                strict: false
in_repo_config:
  enabled:
    ti-community-infra/tichi: true

deck:
  spyglass:
    lenses:
      - lens:
          name: metadata
        required_files:
          - started.json|finished.json
      - lens:
          config:
          name: buildlog
        required_files:
          - build-log.txt
      - lens:
          name: junit
        required_files:
          - .*/junit.*\.xml
      - lens:
          name: podinfo
        required_files:
          - podinfo.json

plank:
  job_url_prefix_config:
    "*": https://prow.tidb.io/view/
  report_templates:
    "*": >-
      [Full PR test history](https://prow.tidb.io/pr-history?org={{.Spec.Refs.Org}}&repo={{.Spec.Refs.Repo}}&pr={{with index .Spec.Refs.Pulls 0}}{{.Number}}{{end}}).
      [Your PR dashboard](https://prow.tidb.io/pr?query=is%3Apr%20state%3Aopen%20author%3A{{with index .Spec.Refs.Pulls 0}}{{.Author}}{{end}}).
  default_decoration_configs:
    "*":
      gcs_configuration:
        bucket: gs://prow-tidb-logs
        path_strategy: explicit
      gcs_credentials_secret: gcs-credentials
      utility_images:
        clonerefs: gcr.io/k8s-prow/clonerefs:v20211229-5ea9b96f66
        entrypoint: gcr.io/k8s-prow/entrypoint:v20211229-5ea9b96f66
        initupload: gcr.io/k8s-prow/initupload:v20211229-5ea9b96f66
        sidecar: gcr.io/k8s-prow/sidecar:v20211229-5ea9b96f66

tide:
  sync_period: 2m

  merge_method:
    ti-community-infra/ti-community-bot: squash
    ti-community-infra/tichi: squash
    ti-community-infra/configs: squash
    ti-community-infra/test-prod: squash
    ti-community-infra/rfcs: squash
    ti-community-infra/devstats: squash
    ti-community-infra/devstats-dev-guide: squash
    tikv/community: squash
    tikv/pd: squash
    tikv/tikv: squash
    pingcap/community: squash
    pingcap/tidb-dashboard: squash
    pingcap/tidb-operator: squash
    pingcap/tiup: squash
    pingcap/tidb: squash
    pingcap/docs: squash
    pingcap/docs-cn: squash
    pingcap/docs-dm: squash
    pingcap/docs-tidb-operator: squash
    pingcap/docs-appdev: squash
    pingcap/dumpling: squash
    pingcap/dm: squash
    pingcap/tidb-tools: squash
    pingcap/tiflow: squash
    pingcap/br: squash
    pingcap/tidb-binlog: squash
    pingcap/parser: squash
    pingcap/tiflash: squash
    pingcap/tiflash-scripts: squash
    pingcap/ng-monitoring: squash
    pingcap/tispark: squash
    pingcap/tiunimanager: squash
    pingcap/tiunimanager-ui: squash
    chaos-mesh/chaos-mesh: squash
    chaos-mesh/website: squash
    chaos-mesh/chaosd: squash

  # Please reference the document about custom commit message template:
  # https://book.prow.tidb.io/#/en/components/tide?id=custom-commit-message-template
  merge_commit_template:
    ti-community-infra:
      title: "{{ .Title }} (#{{ .Number }})"
      body: |
        {{- $body := print .Body -}}
        {{- $issueNumberLine := .ExtractContent "(?im)^Issue Number:.+" $body -}}
        {{- $numbers := .NormalizeIssueNumbers $issueNumberLine -}}
        {{- if $numbers -}}
          {{- range $index, $number := $numbers -}}
            {{- if $index }}, {{ end -}}
            {{- .AssociatePrefix }} {{ .Org -}}/{{- .Repo -}}#{{- .Number -}}
          {{- end -}}
        {{- else -}}
          {{- " " -}}
        {{- end -}}
    tikv:
      title: "{{ .Title }} (#{{ .Number }})"
      body: |
        {{- $body := print .Body -}}

        {{- $numbers := .NormalizeIssueNumbers $body -}}
        {{- if $numbers -}}
          {{- range $index, $number := $numbers -}}
            {{- if $index }}, {{ end -}}
            {{- .AssociatePrefix }} {{ .Org -}}/{{- .Repo -}}#{{- .Number -}}
          {{- end -}}
        {{- else -}}
          {{- " " -}}
        {{- end -}}

        {{- $description := .ExtractContent "(?i)\x60\x60\x60commit-message(?P<content>[\\w|\\W]+?)\x60\x60\x60" $body -}}
        {{- if $description -}}{{- "\n\n" -}}{{- end -}}
        {{- $description -}}

        {{- $signedAuthors := .NormalizeSignedOffBy -}}
        {{- if $signedAuthors -}}{{- "\n\n" -}}{{- end -}}
        {{- range $index, $author := $signedAuthors -}}
          {{- if $index -}}{{- "\n" -}}{{- end -}}
          {{- "Signed-off-by:" }} {{ .Name }} <{{- .Email -}}>
        {{- end -}}

        {{- $coAuthors := .NormalizeCoAuthorBy -}}
        {{- if $coAuthors -}}{{- "\n\n" -}}{{- end -}}
        {{- range $index, $author := $coAuthors -}}
          {{- if $index -}}{{- "\n" -}}{{- end -}}
          {{- "Co-authored-by:" }} {{ .Name }} <{{- .Email -}}>
        {{- end -}}
    pingcap/tidb:
      title: "{{ .Title }} (#{{ .Number }})"
      body: |
        {{- $body := print .Body -}}
        {{- $issueNumberLine := .ExtractContent "(?im)^Issue Number:.+" $body -}}
        {{- $numbers := .NormalizeIssueNumbers $issueNumberLine -}}
        {{- if $numbers -}}
          {{- range $index, $number := $numbers -}}
            {{- if $index }}, {{ end -}}
            {{- .AssociatePrefix }} {{ .Org -}}/{{- .Repo -}}#{{- .Number -}}
          {{- end -}}
        {{- else -}}
          {{- " " -}}
        {{- end -}}
    pingcap/tidb-tools:
      title: "{{ .Title }} (#{{ .Number }})"
      body: |
        {{- $body := print .Body -}}
        {{- $issueNumberLine := .ExtractContent "(?im)^Issue Number:.+" $body -}}
        {{- $numbers := .NormalizeIssueNumbers $issueNumberLine -}}
        {{- if $numbers -}}
          {{- range $index, $number := $numbers -}}
            {{- if $index }}, {{ end -}}
            {{- .AssociatePrefix }} {{ .Org -}}/{{- .Repo -}}#{{- .Number -}}
          {{- end -}}
        {{- else -}}
          {{- " " -}}
        {{- end -}}
    pingcap/tiflow:
      title: "{{ .Title }} (#{{ .Number }})"
      body: |
        {{- $body := print .Body -}}
        {{- $issueNumberLine := .ExtractContent "(?im)^Issue Number:.+" $body -}}
        {{- $numbers := .NormalizeIssueNumbers $issueNumberLine -}}
        {{- if $numbers -}}
          {{- range $index, $number := $numbers -}}
            {{- if $index }}, {{ end -}}
            {{- .AssociatePrefix }} {{ .Org -}}/{{- .Repo -}}#{{- .Number -}}
          {{- end -}}
        {{- else -}}
          {{- " " -}}
        {{- end -}}
    pingcap/tidb-binlog:
      title: "{{ .Title }} (#{{ .Number }})"
      body: |
        {{- $body := print .Body -}}
        {{- $issueNumberLine := .ExtractContent "(?im)^Issue Number:.+" $body -}}
        {{- $numbers := .NormalizeIssueNumbers $issueNumberLine -}}
        {{- if $numbers -}}
          {{- range $index, $number := $numbers -}}
            {{- if $index }}, {{ end -}}
            {{- .AssociatePrefix }} {{ .Org -}}/{{- .Repo -}}#{{- .Number -}}
          {{- end -}}
        {{- else -}}
          {{- " " -}}
        {{- end -}}
    pingcap/ng-monitoring:
      title: "{{ .Title }} (#{{ .Number }})"
      body: |
        {{- $body := print .Body -}}
        {{- $issueNumberLine := .ExtractContent "(?im)^Issue Number:.+" $body -}}
        {{- $numbers := .NormalizeIssueNumbers $issueNumberLine -}}
        {{- if $numbers -}}
          {{- range $index, $number := $numbers -}}
            {{- if $index }}, {{ end -}}
            {{- .AssociatePrefix }} {{ .Org -}}/{{- .Repo -}}#{{- .Number -}}
          {{- end -}}
        {{- else -}}
          {{- " " -}}
        {{- end -}}
    pingcap/community:
      title: "{{ .Title }} (#{{ .Number }})"
      body: " "
    pingcap/tidb-dashboard:
      title: "{{ .Title }} (#{{ .Number }})"
      body: " "
    pingcap/tidb-operator:
      title: "{{ .Title }} (#{{ .Number }})"
      body: " "
    pingcap/tiup:
      title: "{{ .Title }} (#{{ .Number }})"
      body: " "
    pingcap/docs:
      title: "{{ .Title }} (#{{ .Number }})"
      body: " "
    pingcap/docs-cn:
      title: "{{ .Title }} (#{{ .Number }})"
      body: " "
    pingcap/docs-dm:
      title: "{{ .Title }} (#{{ .Number }})"
      body: " "
    pingcap/docs-tidb-operator:
      title: "{{ .Title }} (#{{ .Number }})"
      body: " "
    pingcap/docs-appdev:
      title: "{{ .Title }} (#{{ .Number }})"
      body: " "
    pingcap/dumpling:
      title: "{{ .Title }} (#{{ .Number }})"
      body: " "
    pingcap/dm:
      title: "{{ .Title }} (#{{ .Number }})"
      body: " "
    pingcap/br:
      title: "{{ .Title }} (#{{ .Number }})"
      body: " "
    pingcap/parser:
      title: "{{ .Title }} (#{{ .Number }})"
      body: " "
    pingcap/tiflash:
      title: "{{ .Title }} (#{{ .Number }})"
      body: |
        {{- $body := print .Body -}}
        {{- $issueNumberLine := .ExtractContent "(?im)^Issue Number:.+" $body -}}
        {{- $numbers := .NormalizeIssueNumbers $issueNumberLine -}}
        {{- if $numbers -}}
          {{- range $index, $number := $numbers -}}
            {{- if $index }}, {{ end -}}
            {{- .AssociatePrefix }} {{ .Org -}}/{{- .Repo -}}#{{- .Number -}}
          {{- end -}}
        {{- else -}}
          {{- " " -}}
        {{- end -}}
    pingcap/tispark:
      title: "{{ .Title }} (#{{ .Number }})"
      body: " "
    pingcap/tiflash-scripts:
      title: "{{ .Title }} (#{{ .Number }})"
      body: " "
    pingcap/tiunimanager:
      title: "{{ .Title }} (#{{ .Number }})"
      body: " "
    pingcap/tiunimanager-ui:
      title: "{{ .Title }} (#{{ .Number }})"
      body: " "
    chaos-mesh:
      title: "{{ .Title }} (#{{ .Number }})"

  target_url: https://prow.tidb.io/tide

  pr_status_base_urls:
    "*": https://prow.tidb.io/pr

  squash_label: tide/merge-method-squash
  rebase_label: tide/merge-method-rebase
  merge_label: tide/merge-method-merge

  queries:
    - repos:
        - ti-community-infra/tichi
      labels:
        - status/can-merge
        - "dco-signoff: yes"
      missingLabels:
        - do-not-merge/hold
        - do-not-merge/work-in-progress
        - do-not-merge/blocked-paths
        - needs-rebase
    - repos:
        - ti-community-infra/ti-community-bot
        - ti-community-infra/configs
        - ti-community-infra/test-prod
        - ti-community-infra/rfcs
        - ti-community-infra/devstats
        - ti-community-infra/devstats-dev-guide
        - pingcap/tiup
        - pingcap/community
        - tikv/community
        - pingcap/tidb-dashboard
        - pingcap/tidb-operator
        - pingcap/docs
        - pingcap/docs-cn
        - pingcap/docs-dm
        - pingcap/docs-tidb-operator
        - pingcap/docs-appdev
        - pingcap/dm
        - pingcap/parser
        - pingcap/tiflash-scripts
        - pingcap/ng-monitoring
        - pingcap/tispark
        - pingcap/tiunimanager
        - pingcap/tiunimanager-ui
        - chaos-mesh/chaos-mesh
        - chaos-mesh/website
        - chaos-mesh/chaosd
      labels:
        - status/can-merge
      missingLabels:
        - do-not-merge/hold
        - do-not-merge/work-in-progress
        - do-not-merge/blocked-paths
        - do-not-merge/needs-linked-issue
        - do-not-merge/invalid-title
        - needs-rebase
    # Notice: The following repository are included in version release management.
    # Notice: Because pingcap/tidb, tikv/tikv, tikv/pd repos enable the 'Require approvals' option on branch protection,
    #         we need to enable the 'reviewApprovedRequired' option on tide.
    - repos:
        - pingcap/tidb
        - tikv/tikv
        - tikv/pd
      includedBranches:
        - master
      labels:
        - status/can-merge
      missingLabels:
        - do-not-merge/release-note-label-needed
        - do-not-merge/hold
        - do-not-merge/work-in-progress
        - do-not-merge/blocked-paths
        - do-not-merge/needs-linked-issue
        - do-not-merge/invalid-title
        - do-not-merge/needs-triage-completed
        - needs-rebase
      reviewApprovedRequired: true
    - repos:
        - pingcap/tidb
        - tikv/tikv
        - tikv/pd
      includedBranches:
        - release-4.0
        - release-5.0
        - release-5.1
        - release-5.2
        - release-5.3
        - release-5.4
        - release-6.0
        - release-6.1
        - release-6.2
      labels:
        - status/can-merge
        - cherry-pick-approved
      missingLabels:
        - do-not-merge/release-note-label-needed
        - do-not-merge/hold
        - do-not-merge/work-in-progress
        - do-not-merge/cherry-pick-not-approved
        - do-not-merge/blocked-paths
        - do-not-merge/needs-linked-issue
        - do-not-merge/invalid-title
        - do-not-merge/needs-triage-completed
        - needs-rebase
    - repos:
        - pingcap/dumpling
        - pingcap/tidb-tools
        - pingcap/br
        - pingcap/tiflow
        - pingcap/tidb-binlog
        - pingcap/tiflash
      includedBranches:
        - master
      labels:
        - status/can-merge
      missingLabels:
        - do-not-merge/release-note-label-needed
        - do-not-merge/hold
        - do-not-merge/work-in-progress
        - do-not-merge/blocked-paths
        - do-not-merge/needs-linked-issue
        - do-not-merge/invalid-title
        - needs-rebase
    - repos:
        - pingcap/dumpling
        - pingcap/tidb-tools
        - pingcap/br
        - pingcap/tiflow
        - pingcap/tidb-binlog
        - pingcap/tiflash
      includedBranches:
        - release-4.0
        - release-5.0
        - release-5.1
        - release-5.2
        - release-5.3
        - release-5.4
        - release-6.0
        - release-6.1
        - release-6.2
      labels:
        - status/can-merge
        - cherry-pick-approved
      missingLabels:
        - do-not-merge/release-note-label-needed
        - do-not-merge/hold
        - do-not-merge/work-in-progress
        - do-not-merge/cherry-pick-not-approved
        - do-not-merge/blocked-paths
        - do-not-merge/needs-linked-issue
        - do-not-merge/invalid-title
        - needs-rebase
    - repos:
        - pingcap/tiflow
      includedBranches:
        - cli-use-open-api
      labels:
        - status/can-merge
      missingLabels:
        - do-not-merge/release-note-label-needed
        - do-not-merge/hold
        - do-not-merge/work-in-progress
        - do-not-merge/cherry-pick-not-approved
        - do-not-merge/blocked-paths
        - do-not-merge/needs-linked-issue
        - do-not-merge/invalid-title
        - needs-rebase
    - repos:
        - pingcap/tidb
      includedBranches:
        - feature/distribute-reorg
        - feature/flashback-cluster
      labels:
        - status/can-merge
      missingLabels:
        - do-not-merge/release-note-label-needed
        - do-not-merge/hold
        - do-not-merge/work-in-progress
        - do-not-merge/cherry-pick-not-approved
        - do-not-merge/blocked-paths
        - do-not-merge/needs-linked-issue
        - do-not-merge/invalid-title
        - do-not-merge/needs-triage-completed
        - needs-rebase

  context_options:
    orgs:
      ti-community-infra:
        skip-unknown-contexts: true
        from-branch-protection: true
        repos:
          ti-community-bot:
            required-contexts:
              - "codecov/project"
              - "pull-ti-community-bot-node10-unit-test"
              - "pull-ti-community-bot-node12-unit-test"
              - "pull-ti-community-bot-node14-unit-test"
            skip-unknown-contexts: true
      tikv:
        repos:
          pd:
            required-contexts:
              - "DCO"
              - "idc-jenkins-ci/build"
            skip-unknown-contexts: true
            branches:
              master:
                required-contexts:
                  - "statics"
                  - "chunks (1)"
                  - "chunks (2)"
                  - "chunks (3)"
                  - "chunks (4)"
                  - "chunks (5)"
                  - "chunks (6)"
                  - "chunks (7)"
                  - "chunks (8)"
                  - "chunks (9)"
                  - "chunks (10)"
                  - "tso-function-test"
                skip-unknown-contexts: true
              release-4.0:
                required-contexts:
                  - "statics"
                  - "idc-jenkins-ci/test"
                skip-unknown-contexts: true
              release-5.0:
                required-contexts:
                  - "statics"
                  - "idc-jenkins-ci/test"
                skip-unknown-contexts: true
              release-5.1:
                required-contexts:
                  - "statics"
                  - "idc-jenkins-ci/test"
                skip-unknown-contexts: true
              release-5.2:
                required-contexts:
                  - "statics"
                  - "tso-function-test"
                  - "idc-jenkins-ci/test"
                skip-unknown-contexts: true
              release-5.3:
                required-contexts:
                  - "statics"
                  - "tso-function-test"
                  - "idc-jenkins-ci/test"
                skip-unknown-contexts: true
              release-5.4:
                required-contexts:
                  - "statics"
                  - "tso-function-test"
                  - "idc-jenkins-ci/test"
                skip-unknown-contexts: true
              release-6.0:
                required-contexts:
                  - "statics"
                  - "chunks (1)"
                  - "chunks (2)"
                  - "chunks (3)"
                  - "chunks (4)"
                  - "chunks (5)"
                  - "chunks (6)"
                  - "chunks (7)"
                  - "chunks (8)"
                  - "chunks (9)"
                  - "chunks (10)"
                  - "tso-function-test"
                skip-unknown-contexts: true
              release-6.1:
                required-contexts:
                  - "statics"
                  - "chunks (1)"
                  - "chunks (2)"
                  - "chunks (3)"
                  - "chunks (4)"
                  - "chunks (5)"
                  - "chunks (6)"
                  - "chunks (7)"
                  - "chunks (8)"
                  - "chunks (9)"
                  - "chunks (10)"
                  - "tso-function-test"
                skip-unknown-contexts: true
              release-6.2:
                required-contexts:
                  - "statics"
                  - "chunks (1)"
                  - "chunks (2)"
                  - "chunks (3)"
                  - "chunks (4)"
                  - "chunks (5)"
                  - "chunks (6)"
                  - "chunks (7)"
                  - "chunks (8)"
                  - "chunks (9)"
                  - "chunks (10)"
                  - "tso-function-test"
                skip-unknown-contexts: true
          tikv:
            # Notice: The following configuration takes effect for these branches:
            # master / release-3.0 / release-3.1 / release-4.0 / release-5.x.
            required-contexts:
              - "DCO"
              - "idc-jenkins-ci/test"
              - "tide"
            skip-unknown-contexts: true
      pingcap:
        repos:
          tidb-dashboard:
            from-branch-protection: true
            skip-unknown-contexts: true
          tidb-operator:
            from-branch-protection: true
            skip-unknown-contexts: true
          tiup:
            from-branch-protection: true
            skip-unknown-contexts: false
          docs:
            skip-unknown-contexts: true
            from-branch-protection: true
          docs-cn:
            skip-unknown-contexts: true
            from-branch-protection: true
          docs-dm:
            skip-unknown-contexts: true
            from-branch-protection: true
          docs-tidb-operator:
            skip-unknown-contexts: true
            from-branch-protection: true
          docs-appdev:
            skip-unknown-contexts: true
            from-branch-protection: true
          dumpling:
            skip-unknown-contexts: true
            from-branch-protection: true
          dm:
            skip-unknown-contexts: true
            from-branch-protection: true
          tidb-tools:
            skip-unknown-contexts: true
            from-branch-protection: true
          tiflow:
            skip-unknown-contexts: true
            from-branch-protection: true
          br:
            skip-unknown-contexts: true
            from-branch-protection: true
          tidb-binlog:
            skip-unknown-contexts: true
            from-branch-protection: true
          parser:
            skip-unknown-contexts: true
            from-branch-protection: true
          tiflash:
            skip-unknown-contexts: true
            from-branch-protection: true
          tiflash-scripts:
            skip-unknown-contexts: true
            from-branch-protection: true
          tidb:
            skip-unknown-contexts: true
            from-branch-protection: true
          ng-monitoring:
            skip-unknown-contexts: true
            from-branch-protection: true
          tispark:
            skip-unknown-contexts: true
            from-branch-protection: true
          tiunimanager:
            skip-unknown-contexts: true
            from-branch-protection: true
          pingcap/tiunimanager-ui:
            skip-unknown-contexts: true
            from-branch-protection: true
      chaos-mesh:
        repos:
          chaos-mesh:
            skip-unknown-contexts: false
            from-branch-protection: true
          website:
            skip-unknown-contexts: true
            from-branch-protection: true
          chaosd:
            skip-unknown-contexts: false
            from-branch-protection: true
