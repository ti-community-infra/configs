presubmits:
  tikv/tikv:
    - name: pull-tikv-master-rerere
      decorate: true
      trigger: "(?mi)^/(merge|rerere)\\s*$"
      rerun_command: "/rerere"
      max_concurrency: 1
      branches:
        - ^master$
      spec:
        containers:
          - image: rustinliu/rerere-component:v0.16.6
            command:
              - rerere
            args:
              - --github-token-path=/etc/github/token
              - --dry-run=false
              - --github-endpoint=https://api.github.com
              - --retesting-branch=master-retesting
              - --timeout=40m
              - --require-contexts=tikv_prow_integration_common_test/master-retesting
              - --require-contexts=tikv_prow_integration_compatibility_test/master-retesting
              - --require-contexts=tikv_prow_integration_copr_test/master-retesting
              - --require-contexts=tikv_prow_integration_ddl_test/master-retesting
            volumeMounts:
              - name: github-token
                mountPath: /etc/github
                readOnly: true
        volumes:
          - name: github-token
            secret:
              secretName: github-token
    - name: pull-tikv-release-2.1-rerere
      decorate: true
      trigger: "(?mi)^/(merge|rerere)\\s*$"
      rerun_command: "/rerere"
      max_concurrency: 1
      branches:
        - ^release-2.1$
      spec:
        containers:
          - image: rustinliu/rerere-component:v0.16.6
            command:
              - rerere
            args:
              - --github-token-path=/etc/github/token
              - --dry-run=false
              - --github-endpoint=https://api.github.com
              - --retesting-branch=release-2.1-retesting
              - --timeout=40m
              - --require-contexts=tikv_prow_integration_common_test/release-2.1-retesting
              - --require-contexts=tikv_prow_integration_compatibility_test/release-2.1-retesting
              - --require-contexts=tikv_prow_integration_copr_test/release-2.1-retesting
              - --require-contexts=tikv_prow_integration_ddl_test/release-2.1-retesting
            volumeMounts:
              - name: github-token
                mountPath: /etc/github
                readOnly: true
        volumes:
          - name: github-token
            secret:
              secretName: github-token
    - name: pull-tikv-release-3.0-rerere
      decorate: true
      trigger: "(?mi)^/(merge|rerere)\\s*$"
      rerun_command: "/rerere"
      max_concurrency: 1
      branches:
        - ^release-3.0$
      spec:
        containers:
          - image: rustinliu/rerere-component:v0.16.6
            command:
              - rerere
            args:
              - --github-token-path=/etc/github/token
              - --dry-run=false
              - --github-endpoint=https://api.github.com
              - --retesting-branch=release-3.0-retesting
              - --timeout=40m
              - --require-contexts=tikv_prow_integration_common_test/release-3.0-retesting
              - --require-contexts=tikv_prow_integration_compatibility_test/release-3.0-retesting
              - --require-contexts=tikv_prow_integration_copr_test/release-3.0-retesting
              - --require-contexts=tikv_prow_integration_ddl_test/release-3.0-retesting
            volumeMounts:
              - name: github-token
                mountPath: /etc/github
                readOnly: true
        volumes:
          - name: github-token
            secret:
              secretName: github-token
    - name: pull-tikv-release-4.0-rerere
      decorate: true
      trigger: "(?mi)^/(merge|rerere)\\s*$"
      rerun_command: "/rerere"
      max_concurrency: 1
      branches:
        - ^release-4.0$
      spec:
        containers:
          - image: rustinliu/rerere-component:v0.16.6
            command:
              - rerere
            args:
              - --github-token-path=/etc/github/token
              - --dry-run=false
              - --github-endpoint=https://api.github.com
              - --retesting-branch=release-4.0-retesting
              - --timeout=40m
              - --require-contexts=tikv_prow_integration_common_test/release-4.0-retesting
              - --require-contexts=tikv_prow_integration_compatibility_test/release-4.0-retesting
              - --require-contexts=tikv_prow_integration_copr_test/release-4.0-retesting
              - --require-contexts=tikv_prow_integration_ddl_test/release-4.0-retesting
            volumeMounts:
              - name: github-token
                mountPath: /etc/github
                readOnly: true
        volumes:
          - name: github-token
            secret:
              secretName: github-token
    - name: pull-tikv-release-5.0-rc-rerere
      decorate: true
      trigger: "(?mi)^/(merge|rerere)\\s*$"
      rerun_command: "/rerere"
      max_concurrency: 1
      branches:
        - ^release-5.0-rc$
      spec:
        containers:
          - image: rustinliu/rerere-component:v0.16.6
            command:
              - rerere
            args:
              - --github-token-path=/etc/github/token
              - --dry-run=false
              - --github-endpoint=https://api.github.com
              - --retesting-branch=release-5.0-rc-retesting
              - --timeout=40m
              - --require-contexts=tikv_prow_integration_common_test/release-5.0-rc-retesting
              - --require-contexts=tikv_prow_integration_compatibility_test/release-5.0-rc-retesting
              - --require-contexts=tikv_prow_integration_copr_test/release-5.0-rc-retesting
              - --require-contexts=tikv_prow_integration_ddl_test/release-5.0-rc-retesting
            volumeMounts:
              - name: github-token
                mountPath: /etc/github
                readOnly: true
        volumes:
          - name: github-token
            secret:
              secretName: github-token