postsubmits:
  ti-community-infra/ti-community-bot:
    - name: pull-ti-community-bot-node14-unit-test
      decorate: true
      always_run: true
      branches:
        - ^master$
      spec:
        containers:
          - image: node:14
            command:
              - /bin/bash
              - -c
              - >
                GIT_COMMIT=${PULL_PULL_SHA} &&
                npm ci &&
                npm run build &&
                npm run lint &&
                npm run test &&
                curl -s https://codecov.io/bash | bash
            env:
              - name: CODECOV_TOKEN
                valueFrom:
                  secretKeyRef:
                    name: codecov-tokens
                    key: ti-community-infra-ti-community-bot-codecov-token